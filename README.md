# RetroPrinciples

**复盘知识库 Skill**：查询核心原则、获取最佳实践建议、查阅历史案例。

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## 📖 简介

从真实项目中提炼的复盘知识库，帮助团队查询核心原则、获取最佳实践、避免常见陷阱。

## 🚀 特性

| 特性 | 说明 |
|------|------|
| 🔍 **原则搜索** | 通过关键词搜索相关原则 |
| 📋 **检查清单** | 项目启动前完整检查清单 |
| 📖 **案例查询** | 查找历史复盘案例 |
| 🚨 **场景引擎** | 根据场景动态推荐 |
| 💾 **知识积累** | 支持持续更新和扩展 |
| 🔗 **PAI Gateway** | 关键决策点自动提醒 |

## 🎯 使用方式

### 方式 1：直接调用 Skill

```
/principles "关键词"      # 搜索原则
/checklist               # 获取检查清单
/example "场景"          # 查看相关案例
/reminder "场景"         # 获取场景提醒
/scenario "你想做什么"    # 场景引擎分析
```

### 方式 2：CLI 运行

```bash
# 搜索原则
bun Tools/Query.ts "用户需求"

# 场景分析
bun Tools/scenario.ts "我想启动一个新项目"

# 查看案例
bun Tools/Query.ts --cases

# 交互模式
bun Tools/Interactive/query.ts "技术选型"
```

## 📊 10 条核心原则

| # | 原则 | 级别 | 一句话 |
|---|------|------|--------|
| 1 | 用户需求验证 | 铁律 | 没问过用户 = 猜 |
| 2 | ROI 保守主义 | 铁律 | 乐观是幻想，保守是智慧 |
| 3 | XY Problem 警惕 | 金律 | 问 5 次"为什么"再动手 |
| 4 | 多代理分析 ROI | 建议 | 花小钱防大祸 |
| 5 | 竞品沉默 | 银律 | 90% 有原因 |
| 6 | 文档金字塔 | 建议 | 5% 结论，20% 方案，75% 细节 |
| 7 | 隐性成本 | 银律 | 算到的成本只是冰山 |
| 8 | 可测量 | 金律 | 模糊 = 无效 |
| 9 | 技术选型 | 铁律 | 先 POC 再上车 |
| 10 | 分阶段决策 | 银律 | 每个阶段必须有退出点 |

## 📁 项目结构

```
retro-principles/
├── README.md                    # 本文件
├── LICENSE                     # MIT 许可证
├── .gitignore                  # Git 忽略配置
├── SKILL.md                    # Skill 定义
├── GATEWAY_INTEGRATION.md      # PAI Gateway 集成指南
├── Tools/
│   ├── Query.ts               # 原则查询工具
│   ├── scenario.ts            # 场景引擎
│   └── Interactive/
│       └── query.ts           # 交互式查询
├── Data/                      # 数据存储
│   └── cases.json             # 案例库
└── Skills/
    └── SKILL.md              # Skill 入口
```

## 🎮 使用示例

### 示例 1：搜索原则

```bash
$ bun Tools/Query.ts "用户"

🔍 搜索: "用户"

找到 1 条原则:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
**1. 用户需求验证定律** [铁律]

📝 没问过用户 = 猜

**级别**: 铁律 (必须遵守)
**描述**: 没有被验证的用户需求 = 假设 = 可能是错的

**置信度层次**:
| 置信度 | 条件 |
|--------|------|
| 0% | 假设（"我觉得用户需要..."） |
| 30% | 调研（1-3 个访谈） |
| 60% | 验证（5-10 个访谈 + 数据） |
| 90% | 确认（30+ 问卷 + 支付验证） |

🏷️ 适用场景: 启动新项目, 功能规划, 需求变更
```

### 示例 2：场景引擎

```bash
$ bun Tools/scenario.ts "我想启动一个新项目"

╔══════════════════════════════════════════════════════╗
║              🎯 场景分析结果                          ║
╚══════════════════════════════════════════════════════╝

输入: "我想启动一个新项目"

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🎯 推荐原则

**用户需求验证**, **分阶段决策框架**, **可测量 = 可管理**

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

❓ 关键问题

- 用户真正需要什么？
- 如何验证我们的假设？
- 什么时候是 Go/No-Go 点？
- 如何定义成功？

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✅ 建议行动

- 制定用户调研计划
- 设置里程碑和决策点
- 定义成功指标
- 准备回滚方案

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚠️ 警告

- ⚠️ 不要跳过用户调研
- ⚠️ 设置明确的决策点
- ⚠️ 定义可测量的成功指标
```

### 示例 3：案例查询

```bash
$ bun Tools/Query.ts --cases

📖 案例库 (3 个案例)

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
**1. Context Compression 项目**

📂 项目: PAI Context 优化
💥 教训: 用户需求未验证
📊 结果: 写了 2,813 行文档，但 0 个用户访谈
🏷️ 关联原则: 用户需求验证, ROI 保守主义, 文档金字塔

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
**2. BMad 安装失败**

📂 项目: BMad-Method 框架
💥 教训: 技术选型未验证
📊 结果: 尝试 4 种方法，浪费 30 分钟
🏷️ 关联原则: 技术选型验证律

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
**3. ROI 计算过度乐观**

📂 项目: Context Compression 方案
💥 教训: 成本估算过于乐观
📊 结果: 声称 ROI 654%，实际保守情景 -8%
🏷️ 关联原则: ROI 保守主义, 隐性成本倍增器
```

## 🔗 PAI Gateway 集成

### 自动触发提醒

```
用户: "我想启动一个新项目"
↓
PAI Gateway → RetroPrinciples 触发
↓
输出: 场景分析 + 推荐原则 + 行动清单
```

### 配置 Gateway 规则

```yaml
# ~/.claude/skills/pai-gateway/rules/retro-principles.yaml
rules:
  - name: "启动新项目"
    trigger: "新项目|启动|立项"
    principles:
      - "用户需求验证"
      - "分阶段决策框架"
    action: "reminder"

  - name: "技术选型"
    trigger: "技术选型|选框架|选工具"
    principles:
      - "技术选型验证律"
      - "竞品沉默"
    action: "checklist"
```

详细配置请参考 [GATEWAY_INTEGRATION.md](./GATEWAY_INTEGRATION.md)

## 🎯 场景引擎

### 支持场景

| 场景 | 关键词 | 推荐原则 |
|------|--------|---------|
| 启动新项目 | "新项目", "启动", "立项" | 用户需求验证, 分阶段决策 |
| 技术选型 | "技术选型", "选框架", "选工具" | 技术选型验证, 竞品分析 |
| 用户调研 | "用户调研", "访谈", "需求" | 用户需求验证 |
| 成本预算 | "成本", "预算", "ROI" | ROI 保守主义, 隐性成本 |
| 重大决策 | "决策", "选择", "评估" | 多代理分析, XY Problem |
| 文档编写 | "文档", "汇报", "总结" | 文档金字塔 |
| 风险管理 | "风险", "问题", "挑战" | 多代理分析, 分阶段决策 |
| 验证测试 | "验证", "测试", "检查" | 技术选型验证, 用户需求验证 |

## 📚 相关资源

- **复盘工具**: [retrospective-skill](https://github.com/starlink-awaken/retrospective-skill)
- **知识库**: [retrospective-knowledge-base](https://github.com/starlink-awaken/retrospective-knowledge-base)

## 🤝 贡献

欢迎提交新的原则或改进建议！

1. Fork 本仓库
2. 创建功能分支
3. 提交更改
4. 推送到 GitHub
5. 创建 Pull Request

## 📄 许可证

MIT License - see [LICENSE](./LICENSE) file.

## 👤 作者

starlink-awaken

---

**项目地址**: https://github.com/starlink-awaken/retro-principles
